@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model MVC_2.ViewModels.PeopleViewModel


@{
    string[] headers = { "ID", "Name", "Phone", "City"};
}


<main>
    <h2>@Model.Title</h2>
    <h4>@Model.Description</h4>


    @if (Model.Persons.Count == 0)
    {
        <p>List is Empty</p>
    }



    <p> <a href="/People/Create">Add a new user </a> </p>

    <div>
        <div>
            <form asp-controller="People" asp-action="People" method="post">
                <input type="text" id="search" name="search">
                <button id="submit" type="submit">Search</button>
            </form>

            <div>
                <form asp-controller="People" asp-action="Delete" method="post">
                    <table>
                        <tr>

                       @if (Model.Persons.Count != 0)
                       {
                           @foreach (var header in headers)
                           {
                                    <th>@header</th>
                           }

                        }
                        </tr>

                        @if (Model.Persons.Count != 0)
                        {
                            @foreach (var person in Model.Persons)
                            {
                                <tr>
                                    <td>@person.PersonId</td>
                                    <td>@person.Name</td>
                                    <td>@person.Phone</td>
                                    <td>@person.City</td>
                                </tr>
                            }
                   
                        }

                    </table>
                    @if (Model.Persons.Count != 0)
                     {
                        <p> <a href="/People/Delete"> Delete from list </a> </p>
                     }
                </form>        
            </div>
        </div>
        
    </div>

</main>

<partial name="_ListPeople" ></partial>